##  Developer Test - XeroProducts.API


## Solution Overview
The application is a cross-platform **.NET Core 3.1 Console application** which can be executed on both Windows and Linux operating systems.  
The solution comprises of the following projects - 

- **XeroProducts.API** 
- **XeroProductsTests** -  Tests

## Frameworks and Libraries
- [NET Core 5.1](https://docs.microsoft.com/en-us/aspnet/core/release-notes/aspnetcore-5.0?view=aspnetcore-5.0)
- [EFCore](https://github.com/dotnet/efcore)
- [NLog](https://github.com/NLog/NLog)
- [MSTest](https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-mstest)
- [Moq](https://github.com/moq/moq4)

## Project Details
 - Database : Sql, location : \XeroProducts\App_Data\products.db
 - Logging : nlog Path : XeroProducts\logs




## How to execute the program

First, install [.NET Core 5.0](https://dotnet.microsoft.com/download/dotnet-core/5.0). 



## VisualStudio 

1. Unzip XeroProducts.zip to any location
2. Open the XeroProducts solution file (.sln) using Visual Studio 
3. Run the project 'XeroProducts.API' by selecting the same for the toolbar dropdown.
4. Once it runs successfully the first end point (`GET /products` - gets all products.) Should be up in the default browser.
5. Any tool like postman can be used to access the enpoints. Else
6. https://localhost:5001/docs/index.html - Swagger

## VisualStudio code

Then, open the terminal or command prompt at the root path of the project  and run the following commands in sequence:

```
dotnet restore
dotnet run
```
- Message saying "server started..." will come up.
- Start using the attached postman collection

## Endpoints : 

1. `GET /products` - gets all products.
	```
	Example : https://localhost:5001/api/Products
	```

2. `GET /products?name={name}` - finds all products matching the specified name.
	```
	Example : https://localhost:5001/api/Products/name?name=Apple iPhone 6S
	```

3. `GET /products/{id}` - gets the project that matches the specified ID - ID is a GUID.
	```
	Example : https://localhost:5001/api/Products/de1287c0-4b15-4a7b-9d8a-dd21b3cafec3
	```

4. `POST /products` - creates a new product.
	```
	Example : https://localhost:5001/api/products
	```

	Request Body Product Object:(Product ID is autogenerated and hence not present in the request object)
	```
	{
    "name": "Apple iPhone 6S",
    "description": "Newest mobile product from Apple.",
    "price": 123.45,
    "deliveryPrice": 12.34
	}
	```
	The response object is the created Product .

5. `PUT /products/{id}` - updates a product.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3
	```
	```
	{
    "id": "DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3",
    "name": "Apple iPhone 6S",
    "description": "Newest mobile product from Apple.",
    "price": 123.45,
    "deliveryPrice": 12.34
	}
	```
	The response object is the edited Product .

6. `DELETE /products/{id}` - deletes a product and its options.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3
	```

	The deleted Product ID id returned .
	```
	DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3
	```

7. `GET /products/{id}/options` - finds all options for a specified product.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3/options/
	```
	```
	{
    "Items": [
				{
					"Id": "5c2996ab-54ad-4999-92d2-89245682d534",
					"ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
					"Name": "moto",
					"Description": "White moto razr S7"
				},
				{
					"Id": "9ae6f477-a010-4ec9-b6a8-92a85d6c5f03",
					"ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
					"Name": "White",
					"Description": "White Apple iPhone 6S"
				},
				{
					"Id": "4e2bc5f2-699a-4c42-802e-ce4b4d2ac0ef",
					"ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
					"Name": "Black",
					"Description": "Black Apple iPhone 6S"
				}
			]
	}
	```

8. `GET /products/{id}/options/{optionId}` - finds the specified product option for the specified product.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3/options/5C2996AB-54AD-4999-92D2-89245682D534
	```
	```
	{
    "Id": "5c2996ab-54ad-4999-92d2-89245682d534",
    "ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
    "Name": "moto",
    "Description": "White moto razr S7"
	}
	```

9. `POST /products/{id}/options` - adds a new product option to the specified product.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3/options/
	```
	{
    "Name": "White",
    "Description": "White Samsung Galaxy S7"
	}
	```
	Id is supplied in the query and hence removed from the request body

	Returns created product option:
	```
	{
    "Id": "2b380d3c-796b-4123-b0f6-73daaee5292d",
    "ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
    "Name": "White",
    "Description": "White Samsung Galaxy S7"
	}
	```
10. `PUT /products/{id}/options/{optionId}` - updates the specified product option.
	```
	Example : https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3/options/5c2996ab-54ad-4999-92d2-89245682d534
	```
	{
    "Id": "5c2996ab-54ad-4999-92d2-89245682d534",
    "Name": "moto",
    "Description": "White moto razr S7"
	}
	```
	Returns edited Product option:
	```
	{
    "Id": "5c2996ab-54ad-4999-92d2-89245682d534",
    "ProductId": "de1287c0-4b15-4a7b-9d8a-dd21b3cafec3",
    "Name": "moto",
    "Description": "White moto razr S7"
	}
	```
11. `DELETE /products/{id}/options/{optionId}` - deletes the specified product option.
	```
	Example :https://localhost:5001/api/products/DE1287C0-4B15-4A7B-9D8A-DD21B3CAFEC3/options/5C2996AB-54AD-4999-92D2-89245682D534
	```

	Returns edited Product option Id:
	```
	 "5C2996AB-54AD-4999-92D2-89245682D534"
    ````
